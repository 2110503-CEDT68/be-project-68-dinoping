@startuml Delete_Reservation

title Delete Reservation API Flow

actor User
participant "API Server" as API
database MongoDB

User -> API: DELETE /api/v1/reservations/{id}\nHeader: Authorization: token
activate API

API -> API: Verify JWT token
API -> MongoDB: Find reservation by ID
activate MongoDB
MongoDB --> API: Return reservation object
deactivate MongoDB

alt Reservation not found
  API --> User: 404 - No reservation found
  user --> User: Error
else Reservation found
  API -> API: Check authorization\n(user owns or is admin)
  
  alt Not authorized
    API --> User: 401 - Not authorized to delete
  else Authorized
    API -> MongoDB: Delete reservation
    activate MongoDB
    MongoDB --> API: Deletion successful
    deactivate MongoDB
    
    API --> User: 200 - Success\n{success: true, data: {}}
  end
end

deactivate API
